<html> <head> <title>sample - Ider</title> <meta name="keywords" content="C, C++, algorithm" > <meta name="author" content="Ider Zheng" > <meta name="email" content="ider.cs@gmail.com" > <link rel="stylesheet" type="text/css" href="codestyle.css"> </head> <body>
<div class="codes"><table><tr><td><div class="line_numbers"><pre><code>
<span id="line_1" class="line_number">1</span>
<span id="line_2" class="line_number">2</span>
<span id="line_3" class="line_number">3</span>
<span id="line_4" class="line_number">4</span>
<span id="line_5" class="line_number">5</span>
<span id="line_6" class="line_number">6</span>
<span id="line_7" class="line_number">7</span>
<span id="line_8" class="line_number">8</span>
<span id="line_9" class="line_number">9</span>
<span id="line_10" class="line_number">10</span>
<span id="line_11" class="line_number">11</span>
<span id="line_12" class="line_number">12</span>
<span id="line_13" class="line_number">13</span>
<span id="line_14" class="line_number">14</span>
<span id="line_15" class="line_number">15</span>
<span id="line_16" class="line_number">16</span>
<span id="line_17" class="line_number">17</span>
<span id="line_18" class="line_number">18</span>
<span id="line_19" class="line_number">19</span>
<span id="line_20" class="line_number">20</span>
<span id="line_21" class="line_number">21</span>
<span id="line_22" class="line_number">22</span>
<span id="line_23" class="line_number">23</span>
<span id="line_24" class="line_number">24</span>
<span id="line_25" class="line_number">25</span>
<span id="line_26" class="line_number">26</span>
<span id="line_27" class="line_number">27</span>
<span id="line_28" class="line_number">28</span>
<span id="line_29" class="line_number">29</span>
<span id="line_30" class="line_number">30</span>
<span id="line_31" class="line_number">31</span>
<span id="line_32" class="line_number">32</span>
<span id="line_33" class="line_number">33</span>
<span id="line_34" class="line_number">34</span>
<span id="line_35" class="line_number">35</span>
<span id="line_36" class="line_number">36</span>
<span id="line_37" class="line_number">37</span>
<span id="line_38" class="line_number">38</span>
<span id="line_39" class="line_number">39</span>
<span id="line_40" class="line_number">40</span>
<span id="line_41" class="line_number">41</span>
<span id="line_42" class="line_number">42</span>
<span id="line_43" class="line_number">43</span>
<span id="line_44" class="line_number">44</span>
<span id="line_45" class="line_number">45</span>
<span id="line_46" class="line_number">46</span>
<span id="line_47" class="line_number">47</span>
<span id="line_48" class="line_number">48</span>
<span id="line_49" class="line_number">49</span>
<span id="line_50" class="line_number">50</span>
<span id="line_51" class="line_number">51</span>
<span id="line_52" class="line_number">52</span>
<span id="line_53" class="line_number">53</span>
<span id="line_54" class="line_number">54</span>
<span id="line_55" class="line_number">55</span>
<span id="line_56" class="line_number">56</span>
<span id="line_57" class="line_number">57</span>
<span id="line_58" class="line_number">58</span>
<span id="line_59" class="line_number">59</span>
<span id="line_60" class="line_number">60</span>
<span id="line_61" class="line_number">61</span>
<span id="line_62" class="line_number">62</span>
<span id="line_63" class="line_number">63</span>
<span id="line_64" class="line_number">64</span>
<span id="line_65" class="line_number">65</span>
<span id="line_66" class="line_number">66</span>
<span id="line_67" class="line_number">67</span>
<span id="line_68" class="line_number">68</span>
<span id="line_69" class="line_number">69</span>
<span id="line_70" class="line_number">70</span>
<span id="line_71" class="line_number">71</span>
<span id="line_72" class="line_number">72</span>
<span id="line_73" class="line_number">73</span>
<span id="line_74" class="line_number">74</span>
<span id="line_75" class="line_number">75</span>
<span id="line_76" class="line_number">76</span>
<span id="line_77" class="line_number">77</span>
<span id="line_78" class="line_number">78</span>
<span id="line_79" class="line_number">79</span>
<span id="line_80" class="line_number">80</span>
<span id="line_81" class="line_number">81</span>
<span id="line_82" class="line_number">82</span>
<span id="line_83" class="line_number">83</span>
<span id="line_84" class="line_number">84</span>
<span id="line_85" class="line_number">85</span>
<span id="line_86" class="line_number">86</span>
<span id="line_87" class="line_number">87</span>
<span id="line_88" class="line_number">88</span>
<span id="line_89" class="line_number">89</span>
<span id="line_90" class="line_number">90</span>
<span id="line_91" class="line_number">91</span>
<span id="line_92" class="line_number">92</span>
<span id="line_93" class="line_number">93</span>
<span id="line_94" class="line_number">94</span>
<span id="line_95" class="line_number">95</span>
<span id="line_96" class="line_number">96</span>
<span id="line_97" class="line_number">97</span>
<span id="line_98" class="line_number">98</span>
<span id="line_99" class="line_number">99</span>
<span id="line_100" class="line_number">100</span>
<span id="line_101" class="line_number">101</span>
</code></pre></div></td><td width="100%"><div class="code_content"><pre><code>
<span class="preprocessor">#include</span> &lt;<span class="stdlib">iostream</span>&gt;
<span class="preprocessor">#include</span> &lt;<span class="stdlib">vector</span>&gt;
<span class="preprocessor">#include</span> &lt;<span class="stdlib">stack</span>&gt;
<span class="preprocessor">#include</span> &lt;<span class="stdlib">stdio.h</span>&gt;
<span class="preprocessor">#include</span> &lt;<span class="stdlib">cmath</span>&gt;

<span class="keyword">using namespace</span> std;

<span class="comment">//Following is not valid C++ code</span>
<span class="comment">//Shell does not support lazy mode <span class="keyword">for</span> repeate match,</span>
<span class="comment">//So, it used to see <span class="keyword">if</span> my lazy-way works <span class="keyword">for</span> the comment and quotations match</span>

<span class="comment">/* c style comment  */</span> haha <span class="comment">/**/</span> xixi <span class="comment">/*   */</span> en <span class="comment">/*/*/</span> append <span class="comment">/* haha */</span> what? <span class="comment">/* haha */</span> <span class="keyword"><span class="builtintype">double</span></span> <span class="comment">/*haha *    */</span>

<span class="comment">//For quotations, it also has escape issue. Hence following is used to check <span class="keyword">if</span> quotation is correct</span>
<span class="quote">"<span class="number">124</span>"</span> asdf <span class="quote">""</span> haha <span class="quote">"asd\""</span> asd <span class="quote">"\" asdf"</span> gewg <span class="quote">"\\"</span> fef <span class="quote">"\\\\\""</span> qertq <span class="quote">"asdfas\\\\\""</span> qwetqwe  <span class="quote">"asdfas\\\\\" fa"</span>

<span class="comment">//path: an absolute path <span class="keyword">for</span> a file (Unix-style)</span>
<span class="stdlib">std::string</span> SimplifyPath(<span class="stdlib">string</span> path) 
{
    <span class="builtintype">int</span> x =<span class="number">19L</span>;
    <span class="builtintype">int</span> t =<span class="number">90u</span>;
    <span class="builtintype">float</span> f = <span class="number">10.e39U</span>;
    <span class="builtintype">float</span> z = <span class="number">.90e-10f</span>;
    <span class="builtintype">int</span> o = <span class="number">07723u</span>;
    <span class="builtintype">int</span> h = <span class="number">0X8FeaL</span>;
    <span class="builtintype">bool</span> truevaule= <span class="boolean">true</span>;
    <span class="builtintype">bool</span> falsevalue = <span class="boolean">false</span>;
    path.push_back(<span class="character">'/'</span>);<span class="comment">//make sure the last path would be push to <span class="stdlib">stack</span></span>
    <span class="stdlib">std  :: stack</span>&lt;<span class="builtintype">size_t</span>&gt; iStack; <span class="comment">//index of each directory in the path</span>
    <span class="builtintype">size_t</span> pos = <span class="number">0</span>; <span class="comment">//position <span class="keyword">for</span> next directory to append</span>
    iStack.push(pos);

    <span class="comment">//since the path is absolute, the first character would always be <span class="character">'/'</span> </span>
    <span class="keyword">for</span> (<span class="builtintype">int</span> i = <span class="number">1</span>; i &lt; path.size(); ++i)
    {
        <span class="builtintype">char</span> c = path[i];
        <span class="keyword">if</span> (c != <span class="character">'/'</span>)
        {
            path[++pos] =c;
            <span class="keyword">continue</span>;
        }

        <span class="keyword">if</span>(path[i-<span class="number">1</span>] == <span class="character">'/'</span>) <span class="keyword">continue</span>;
        
        path[++pos] = c;<span class="comment">// c == <span class="character">'/'</span></span>
        <span class="builtintype">int</span> dir = iStack.top();
        <span class="keyword">if</span> (path[dir+<span class="number">1</span>]  == <span class="character">'.'</span>)
            <span class="keyword">switch</span> (path[dir+<span class="number">2</span>])
            {
                <span class="comment">//stay in current directory</span>
                <span class="keyword">case</span> <span class="character">'/'</span>: pos = dir; <span class="keyword">break</span>;
                    
                <span class="keyword">case</span> <span class="character">'.'</span>:
                    <span class="keyword">if</span> (path[dir+<span class="number">3</span>] != <span class="character">'/'</span>) <span class="comment">//hiden file</span>
                        iStack.push(pos);
                    <span class="keyword">else if</span>(<span class="boolean">true</span>)
                    {
                        <span class="comment">//back to the position of previous directory</span>
                        <span class="keyword">if</span>(iStack.size() &gt; <span class="number">1</span>) iStack.pop();
                        pos = iStack.top();
                    }
                    <span class="keyword">break</span>;
                    
                <span class="keyword">default</span>: <span class="comment">//hiden file</span>
                    iStack.push(pos);
                    <span class="keyword">break</span>;
            }
        <span class="keyword">else</span> <span class="comment">//simple directory</span>
            iStack.push(pos);
    }

    <span class="keyword">if</span> (pos == <span class="number">0</span>)pos = pos+<span class="number">1</span>; <span class="comment">//the path is back to the root</span>
    
    path.erase(pos);
    <span class="keyword">return</span> path;

    <span class="keyword">return</span> <span class="boolean">true</span>;
    <span class="keyword">return</span>  <span class="boolean">false</span>;
    <span class="keyword">return</span> <span class="number">0</span>;
}

<span class="builtintype">int</span> main(<span class="builtintype">int</span> argc, <span class="builtintype">char</span>** argv)
{
    <span class="stdlib">string</span> s = <span class="quote">"/home/../.."</span>;
    <span class="stdlib">cout</span> &lt;&lt; s &lt;&lt; <span class="quote">" =&gt; "</span> &lt;&lt; SimplifyPath(s) &lt;&lt; <span class="stdlib">endl</span>;
    s = <span class="quote">"/a/./.b/../../c/"</span>;
    <span class="stdlib">cout</span> &lt;&lt; s &lt;&lt; <span class="quote">" =&gt; "</span> &lt;&lt; SimplifyPath(s) &lt;&lt; <span class="stdlib">endl</span>;
    s = <span class="quote">"/home/of/foo/../../bar/../../is/./here/."</span>;
    <span class="stdlib">cout</span> &lt;&lt; s &lt;&lt; <span class="quote">" =&gt; "</span> &lt;&lt; SimplifyPath(s) &lt;&lt; <span class="stdlib">endl</span>;
<span class="comment">/*<br /> <br /> /home/../.. =&gt; /<br /> /a/./.b/../../c/ =&gt; /c<br /> /home/of/foo/../../bar/../../is/./here/. =&gt; /is/here<br /><br /> */</span>
    
    
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre></div></td></tr></table></div>
</tr></table> <div> <a class="link_text" href="sample.cpp">View Program Text</a> <br/> <br/> <br/> <img class="test_status" src="sample.jpg" alt="Test Status"> </div> </body> </html>
